#
# This file is managed by Ansible.
# Do not edit this file manually.
# Any changes will be automatically reverted.
#
{% if sudo_host_alias -%}
  {{ "\n" }}# Host aliases{{ "\n" }}
  {%- for alias, values in sudo_host_alias.items() -%}
    Host_Alias {{ alias | upper}} = {{ values | join(', ') }}{{ "\n" }}
  {%- endfor %}
{% endif %}

{%- if sudo_user_alias -%}
  {{ "\n" }}# User aliases{{ "\n" }}
  {%- for alias, values in sudo_user_alias.items() -%}
    {%- for each_user in values -%}
      User_Alias {{ alias |upper}} =
      {%- for user_item in each_user -%}
         {{ " " if loop.first else '' }}{{ user_item.username }}{{ ", " if not loop.last else '' }}
        {%- endfor %} {{ "\n" }}
    {%- endfor %}
  {%- endfor %}
{% endif %}

{%- if sudo_cmd_alias -%}
  {{ "\n" }}# Command aliases{{ "\n" }}
  {%- for alias, values in sudo_cmd_alias.items() -%}
    Cmnd_Alias {{ alias | upper}} = {{ values | join(', ') }}{{ "\n" }}
  {%- endfor %}
{% endif %}

{%- if sudo_defaults -%}
  {{ "\n" }}# Defaults{{ "\n" }}
  {%- for item in sudo_defaults -%}
{% if item == "requiretty" %}
Defaults:!NOTTYCMDS !{{ item }}
{% else %}
Defaults {{ item }}
{% endif %}
  {%- endfor %}
{% endif %}

{%- if sudo_users -%}
  {{ "\n" }}# Users and groups{{ "\n" }}
  {%- for item in sudo_users %}
    {%- for user, options in item.items() -%}
      {{ user }} {{ options.host }} ={{ ' ' }}
      {%- if options.runas -%}
        ({{ options.runas }}){{ ' ' }}
      {%- endif -%}
      {%- if options.tag -%}
        {{ options.tag }}:{{ ' ' }}
      {%- endif -%}
      {{ options.cmd }}{{ "\n" }}
    {%- endfor %}
  {%- endfor %}
{% endif %}

# Allow members of group sudo to execute any command
%sudo ALL=(ALL:ALL) ALL
%admin ALL=(ALL) ALL

{%- if sudo_include -%}
  {{ "\n" }}# File includes{{ "\n" }}
  {%- for item in sudo_include -%}
    #include {{ item }}{{ "\n" }}
  {%- endfor %}
{% endif %}

{%- if sudo_includedir -%}
  {{ "\n" }}# Directory includes{{ "\n" }}
  {%- for item in sudo_includedir -%}
    #includedir {{ item }}{{ "\n" }}
  {%- endfor %}
{% endif %}
